"use strict";var wcapf_params=wcapf_params||{filter_input_delay:"",chosen_lib_search_threshold:"",preserve_hierarchy_accordion_state:"",enable_animation_for_hierarchy_accordion:"",hierarchy_accordion_animation_speed:"",hierarchy_accordion_animation_easing:"",loading_overlay_options:"",scroll_to_top_speed:"",scroll_to_top_easing:"",is_mobile:"",disable_inputs_while_fetching_results:"",apply_filters_on_browser_history_change:"",shop_loop_container:"",not_found_container:"",enable_pagination_via_ajax:"",pagination_container:"",sorting_control:"",attach_chosen_on_sorting:"",loading_animation:"",scroll_window:"",scroll_window_for:"",scroll_window_when:"",scroll_window_custom_element:"",scroll_to_top_offset:""};jQuery(document).ready(function(m){var a,w=m("body"),g="~",t=parseInt(wcapf_params.filter_input_delay),v=0<=t?t:800,i={},e=m(".wcapf-single-filter"),n=m(".wcapf-nav-filter"),r=m(".wcapf-number-range-filter"),o=m(".wcapf-date-range-filter");function c(){jQuery().chosen&&n.find(".wcapf-chosen-select").each(function(){var a=m(this),t={},e=a.attr("data-no-results-message");e&&(t.no_results_text=e);e=parseInt(wcapf_params.chosen_lib_search_threshold);e&&(t.disable_search_threshold=e),a.chosen(t)})}function l(){n.find(".hierarchy-accordion-toggle").on("click",function(){var a=m(this),t=a.parent("li").children("ul");a.toggleClass("active"),wcapf_params.enable_animation_for_hierarchy_accordion?t.slideToggle(wcapf_params.hierarchy_accordion_animation_speed,wcapf_params.hierarchy_accordion_animation_easing):t.toggle()})}function y(a,t,e,n){a=(a+"").replace(/[^\d+\-Ee.]/g,"");var a=isFinite(+a)?+a:0,t=isFinite(+t)?Math.abs(t):0,n=void 0===n?",":n,e=void 0===e?".":e,a=(t?function(a,t){t=Math.pow(10,t);return""+Math.round(a*t)/t}(a,t):""+Math.round(a)).split(".");return 3<a[0].length&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(a[1]||"").length<t&&(a[1]=a[1]||"",a[1]+=new Array(t-a[1].length+1).join("0")),a.join(e)}function s(){"undefined"!=typeof noUiSlider&&r.find(".wcapf-range-slider").each(function(){var a,n,i,r,t,o,c,l,e,s,p,f,d=m(this),_=d.attr("data-filter-key"),h=d.find(".wcapf-noui-slider");function u(a){w.trigger("wcapf-nouislider-before-filter-products",[d,a]);var t,e=parseFloat(a[0]),n=parseFloat(a[1]);e===i&&n===r?(t=j(_),history.pushState({},"",t)):T(_,e+g+n),F(),w.trigger("wcapf-nouislider-after-filter-products",[d,a])}h.hasClass("wcapf-noui-target")||(a=h.attr("id"),n=d.attr("data-display-values-as"),i=parseFloat(d.attr("data-range-min-value")),r=parseFloat(d.attr("data-range-max-value")),t=parseFloat(d.attr("data-step")),o=d.attr("data-decimal-places"),c=d.attr("data-thousand-separator"),l=d.attr("data-decimal-separator"),e=parseFloat(d.attr("data-min-value")),h=parseFloat(d.attr("data-max-value")),s=d.find(".min-value"),p=d.find(".max-value"),f=document.getElementById(a),noUiSlider.create(f,{start:[e,h],step:t,connect:!0,cssPrefix:"wcapf-noui-",range:{min:i,max:r}}),f.noUiSlider.on("update",function(a){var t=y(a[0],o,l,c),e=y(a[1],o,l,c);"plain_text"===n?(s.html(t),p.html(e)):(s.val(t),p.val(e)),w.trigger("wcapf-nouislider-update",[d,a])}),f.noUiSlider.on("change",function(a){clearTimeout(d.data("timer")),d.data("timer",setTimeout(function(){d.removeData("timer"),u(a)},v))}),s.on("input",function(a){a.preventDefault();var t=m(this);clearTimeout(t.data("timer")),t.data("timer",setTimeout(function(){t.removeData("timer");var a=t.val();f.noUiSlider.set([a,null]),u(f.noUiSlider.get())},v))}),p.on("input",function(a){a.preventDefault();var t=m(this);clearTimeout(t.data("timer")),t.data("timer",setTimeout(function(){t.removeData("timer");var a=t.val();f.noUiSlider.set([null,a]),u(f.noUiSlider.get())},v))}))})}function p(a){var t,e=a.closest(".wcapf-date-input"),n=e.attr("data-filter-key"),i=e.attr("data-is-range"),r="",a=!1;clearTimeout(e.data("timer")),i?(i=e.find(".date-from-input").val(),t=e.find(".date-to-input").val(),i&&t?(r=i+g+t,a=!0):i||t||(a=!0)):((t=e.find(".date-from-input").val())&&(r=t),a=!0),a&&e.data("timer",setTimeout(function(){var a;e.removeData("timer"),r?T(n,r):(a=j(n),history.pushState({},"",a)),F()},v))}function f(){var a,t,e,n,i;jQuery().datepicker&&(a=(i=o.find(".wcapf-date-input")).attr("data-date-format"),t=i.attr("data-date-picker-year-dropdown"),e=i.attr("data-date-picker-month-dropdown"),n=i.find(".date-from-input"),i=i.find(".date-to-input"),n.datepicker({dateFormat:a,changeYear:t,changeMonth:e}),i.datepicker({dateFormat:a,changeYear:t,changeMonth:e}),n.on("change",function(){p(m(this))}),i.on("change",function(){p(m(this))}))}function d(){wcapf_params.attach_chosen_on_sorting&&jQuery().chosen&&w.find(".woocommerce-ordering select.orderby").chosen({disable_search_threshold:15}),wcapf_params.sorting_control?w.find(".woocommerce-ordering").each(function(){var a=m(this);a.on("submit",function(a){a.preventDefault()}),a.on("change","select.orderby",function(a){a.preventDefault();T("orderby",m(this).val()),F()})}):w.find(".woocommerce-ordering").each(function(){var a=m(this);a.on("change","select.orderby",function(){a.submit()})})}function _(){var a;wcapf_params.disable_inputs_while_fetching_results&&(e.find(a="input, select").attr("disabled","disabled"),e.find(a).trigger("chosen:updated"),"undefined"!=typeof noUiSlider&&r.find(".wcapf-noui-slider").each(function(a,t){t.setAttribute("disabled",!0)}),e.find(".wcapf-labeled-nav .item, .wcapf-active-filters .item").addClass("disabled"))}function h(){wcapf_params.disable_inputs_while_fetching_results&&(r.find("input").removeAttr("disabled"),o.find("input").removeAttr("disabled"),"undefined"!=typeof noUiSlider&&r.find(".wcapf-noui-slider").each(function(a,t){t.removeAttribute("disabled")}))}function u(){var a,t,e,n;"none"!==wcapf_params.scroll_window&&(a=wcapf_params.scroll_window_for,t=wcapf_params.is_mobile,("mobile"===a&&t||"desktop"===a&&!t||"both"===a)&&(wcapf_params.scroll_to_top_offset&&(e=parseInt(wcapf_params.scroll_to_top_offset)),m(wcapf_params.shop_loop_container).length?n=wcapf_params.shop_loop_container:m(wcapf_params.not_found_container).length&&(n=wcapf_params.not_found_container),"custom"===wcapf_params.scroll_window&&(n=wcapf_params.scroll_window_custom_element),(n=m(n)).length&&((e=n.offset().top-e)<0&&(e=0),m("html, body").stop().animate({scrollTop:e},wcapf_params.scroll_to_top_speed,wcapf_params.scroll_to_top_easing))))}function b(){_(),wcapf_params.loading_animation&&m.LoadingOverlay("show",wcapf_params.loading_overlay_options),"immediately"===wcapf_params.scroll_window_when&&u(),w.trigger("wcapf_before_fetching_products")}function S(a){wcapf_params.loading_animation&&m.LoadingOverlay("hide"),w.trigger("wcapf_before_updating_products",[a])}function x(a){var t,e;c(),l(),s(),f(),d(),t=a,e=".woocommerce-result-count",m(wcapf_params.shop_loop_container).find(e).length||(t=t.find(e).html(),w.find(e).html(t)),h(),"after"===wcapf_params.scroll_window_when&&u(),w.trigger("wcapf_after_updating_products",[a])}function F(a){var c=0<arguments.length&&void 0!==a&&a;b(),m.get(window.location.href,function(a){var o=m(a);m.each(i,function(a){var t='[data-id="'+a+'"]',e=m(t),n=e.find(".wcapf-field-inner"),i=o.find(t),r=m(i).attr("class");wcapf_params.preserve_hierarchy_accordion_state&&e.hasClass("hierarchy-accordion")&&e.find(".hierarchy-accordion-toggle.active").each(function(){var a=m(this).parent().children("input").val(),t='input[value="'+a+'"] ~ ul';i.find('input[value="'+a+'"] ~ .hierarchy-accordion-toggle').attr("class","hierarchy-accordion-toggle active"),i.find(t).show()});a=i.find(".wcapf-field-inner").html(),t="show-hidden-items";e.hasClass(t)?i.hasClass(t)||(r+=" "+t):r=r.replace(t,""),e.attr("class",r.trim()),(c||e.hasClass("wcapf-nav-filter"))&&n.html(a),e.trigger("wcapf-field-updated",[i])}),S(o);var t=o.find(wcapf_params.shop_loop_container),a=o.find(wcapf_params.not_found_container);wcapf_params.shop_loop_container===wcapf_params.not_found_container?m(wcapf_params.shop_loop_container).html(t.html()):m(wcapf_params.not_found_container).length?t.length?m(wcapf_params.not_found_container).html(t.html()):a.length&&m(wcapf_params.not_found_container).html(a.html()):m(wcapf_params.shop_loop_container).length&&(t.length?m(wcapf_params.shop_loop_container).html(t.html()):a.length&&m(wcapf_params.shop_loop_container).html(a.html())),x(o)})}function k(a){for(var t,e={},n=(a=(a=void 0===a?window.location.href:a).replaceAll("%2C",",")).slice(a.indexOf("?")+1).split("&"),i=n.length,r=0;r<i;r++)e[(t=n[r].split("="))[0]]=t[1];return e}function D(){var a=window.location.href,t=k(a),e=parseInt(a.replace(/.+\/page\/(\d+)+/,"$1"));return e?1<e&&(a=a.replace(/page\/(\d+)/,"page/1")):void 0===t.paged||1<(t=parseInt(t.paged))&&(a=a.replace("paged="+t,"paged=1")),a}function T(a,t,e,n){void 0===e&&(e=!0),void 0===n&&(n=D());var i=new RegExp("([?&])"+a+"=.*?(&|$)","i"),r=-1!==n.indexOf("?")?"&":"?",t=n.match(i)?n.replace(i,"$1"+a+"="+t+"$2"):n+r+a+"="+t;return!0===e?history.pushState({},"",t):t}function j(a,t){var e=k(t=void 0===t?D():t),n=Object.keys(e).length,i=t.indexOf("?"),r=t.indexOf(a);return 1<n?"?"+(1<r-i?t.replace("&"+a+"="+e[a],""):t.replace(a+"="+e[a]+"&","")).split("?")[1]:t.replace("?"+a+"="+e[a],"")}function U(a,t,e,n){var i=2<arguments.length&&void 0!==e&&e,r=3<arguments.length?n:void 0,e=!1,n=void 0!==r?k(r):k();t=void 0!==n[a]?(n=(r=n[a]).split(","),0<r.length?(0<=(r=m.inArray(t,n))?(n.splice(r,1),0===n.length&&(e=!0)):n.push(t),1<n.length?n.join(","):n):t):t,e?(e=j(a),history.pushState({},"",e)):T(a,t),F(i)}function C(a,t){var e=a.closest(".wcapf-single-filter").attr("data-id"),n=i[e],a=n.filterKey,e=n.multipleFilter;if(a){if(!t.length){n=j(a);return history.pushState({},"",n),void F()}e?U(a,t):(e=a,a=t,t=k(),a=void 0!==t[e]&&t[e]===a?j(e):T(e,a,!1),history.pushState({},"",a),F())}}e.each(function(){var a=m(this),t=a.attr("data-id"),e=a.find(".wcapf-field-inner > div"),a=e.attr("data-filter-key"),e=parseInt(e.attr("data-multiple-filter"));i[t]={filterKey:a,multipleFilter:e}}),c(),l(),s(),f(),d(),wcapf_params.enable_pagination_via_ajax&&wcapf_params.pagination_container&&(a=m(wcapf_params.shop_loop_container),t=wcapf_params.pagination_container+" a",a.length&&a.on("click",t,function(a){a.preventDefault();a=m(this).attr("href");history.pushState({},"",a),F()})),n.on("change",'.wcapf-layered-nav [type="checkbox"], .wcapf-layered-nav [type="radio"]',function(a){a.preventDefault();var t=m(this),a=t.val();C(t,a)}),n.on("click",".wcapf-labeled-nav .item:not(.disabled)",function(a){a.preventDefault();var t=m(this),a=t.attr("data-value");C(t,a)}),n.on("change","select",function(a){a.preventDefault();var t=m(this),a=t.val(),t=t.closest(".wcapf-single-filter").attr("data-id"),t=i[t].filterKey;a.length?T(t,a.toString()):(t=j(t),history.pushState({},"",t)),F()});r.on("input",".wcapf-range-number .min-value, .wcapf-range-number .max-value",function(a){a.preventDefault();var o=m(this);clearTimeout(o.data("timer")),o.data("timer",setTimeout(function(){o.removeData("timer");var a=o.closest(".wcapf-range-number"),t=a.attr("data-filter-key"),e=a.attr("data-range-min-value"),n=a.attr("data-range-max-value"),i=a.find(".min-value").val(),r=a.find(".max-value").val();i.length||(i=e,a.find(".min-value").val(i)),r.length||(r=n,a.find(".max-value").val(r)),parseFloat(i)<parseFloat(e)&&(i=e,a.find(".min-value").val(i)),parseFloat(i)>parseFloat(n)&&(i=n,a.find(".min-value").val(i)),parseFloat(r)>parseFloat(n)&&(r=n,a.find(".max-value").val(r)),parseFloat(i)>parseFloat(r)&&(r=i,a.find(".max-value").val(r)),i===e&&r===n?(n=j(t),history.pushState({},"",n)):T(t,i+g+r),F()},v))}),n.on("click",".wcapf-active-filters .item:not(.disabled)",function(a){a.preventDefault();a=m(this);U(a.attr("data-filter-key"),a.attr("data-value"),!0)}),w.on("wcapf-reset-filters",function(a,t){var e;(t=(t=t).attr("data-keys"))&&(t=t.split(","),e="",m.each(t,function(a,t){e=e?j(t,e):j(t)}),e=e||window.location.href.split("?")[0],history.pushState({},"",e),F(!0))}),n.on("click",".wcapf-reset-filters-btn",function(a){a.preventDefault();a=m(this);w.trigger("wcapf-reset-filters",[a])}),e.on("wcapf-clear-filter",function(){var a=m(this).attr("data-id"),a=j(i[a].filterKey);history.pushState({},"",a),F(!0)}),w.on("wcapf-run-filter-products",function(a,t){F(t)}),(m(wcapf_params.shop_loop_container).length||m(wcapf_params.not_found_container).length)&&wcapf_params.apply_filters_on_browser_history_change&&m(window).bind("popstate",function(){F(!0)})});